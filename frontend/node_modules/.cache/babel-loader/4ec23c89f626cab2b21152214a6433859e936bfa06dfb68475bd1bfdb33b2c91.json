{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';// Import useNavigate hook\nimport\"./login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{loginStatus,loginStatusMethod}=_ref;const[isLoginMode,setIsLoginMode]=useState(true);const[showPopup,setShowPopup]=useState(false);const[popupMessage,setPopupMessage]=useState('');const navigate=useNavigate();// Initialize navigate function\nconst toggleMode=()=>{setIsLoginMode(!isLoginMode);setShowPopup(false);// Hide popup when toggling mode\n};const handleSubmit=async event=>{event.preventDefault();const email=document.getElementById('email').value;const password=document.getElementById('password').value;const endpoint=isLoginMode?'/login':'/signup';const url=\"http://localhost:4000\".concat(endpoint);// Adjust the port if your backend uses a different one\ntry{const response=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await response.json();if(response.ok){if(isLoginMode){// Navigate to /coursecontent if login is successful\nloginStatusMethod(true);navigate('/coursecontent');}else{// Handle signup success\nsetPopupMessage('Signup Successful! Please log in.');setShowPopup(true);setTimeout(()=>{setShowPopup(false);toggleMode();},3000);}}else{throw new Error(data.message||'An error occurred');}}catch(error){setPopupMessage(error.message);setShowPopup(true);setTimeout(()=>setShowPopup(false),3000);}};const renderForm=()=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isLoginMode?'Login':'Sign Up'})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:isLoginMode?'Login':'Sign Up'}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,method:\"post\",children:renderForm()}),showPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"popup\",style:{backgroundColor:'#f44336',color:'#fff'},children:popupMessage}),/*#__PURE__*/_jsxs(\"p\",{children:[isLoginMode?\"Don't have an account? \":\"Already have an account? \",/*#__PURE__*/_jsx(\"button\",{onClick:toggleMode,id:\"toggleModeButton\",children:isLoginMode?'Sign Up Here':'Login Here'})]})]});}export default Login;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Login","_ref","loginStatus","loginStatusMethod","isLoginMode","setIsLoginMode","showPopup","setShowPopup","popupMessage","setPopupMessage","navigate","toggleMode","handleSubmit","event","preventDefault","email","document","getElementById","value","password","endpoint","url","concat","response","fetch","method","headers","body","JSON","stringify","data","json","ok","setTimeout","Error","message","error","renderForm","children","htmlFor","type","id","required","className","onSubmit","style","backgroundColor","color","onClick"],"sources":["C:/Javascript/learning app/learning-app-combinedwithbuild/frontend/src/component/login/login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom'; // Import useNavigate hook\nimport \"./login.css\";\n\nfunction Login({loginStatus, loginStatusMethod}) {\n  const [isLoginMode, setIsLoginMode] = useState(true);\n  const [showPopup, setShowPopup] = useState(false);\n  const [popupMessage, setPopupMessage] = useState('');\n  const navigate = useNavigate(); // Initialize navigate function\n\n  const toggleMode = () => {\n    setIsLoginMode(!isLoginMode);\n    setShowPopup(false); // Hide popup when toggling mode\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    \n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    \n    const endpoint = isLoginMode ? '/login' : '/signup';\n    const url = `http://localhost:4000${endpoint}`; // Adjust the port if your backend uses a different one\n    \n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        if (isLoginMode) {\n          // Navigate to /coursecontent if login is successful\n          loginStatusMethod(true);\n          navigate('/coursecontent');\n        } else {\n          // Handle signup success\n          setPopupMessage('Signup Successful! Please log in.');\n          setShowPopup(true);\n          setTimeout(() => {\n            setShowPopup(false);\n            toggleMode();\n          }, 3000);\n        }\n      } else {\n        throw new Error(data.message || 'An error occurred');\n      }\n    } catch (error) {\n      setPopupMessage(error.message);\n      setShowPopup(true);\n      setTimeout(() => setShowPopup(false), 3000);\n    }\n  };\n\n  const renderForm = () => (\n    <>\n      <label htmlFor=\"email\">Email:</label>\n      <input type=\"email\" id=\"email\" required />\n      <label htmlFor=\"password\">Password:</label>\n      <input type=\"password\" id=\"password\" required />\n      <button type=\"submit\">{isLoginMode ? 'Login' : 'Sign Up'}</button>\n    </>\n  );\n\n  return (\n    <div className=\"login-container\">\n      <h1>{isLoginMode ? 'Login' : 'Sign Up'}</h1>\n      <form onSubmit={handleSubmit} method='post'>\n        {renderForm()}\n      </form>\n      {showPopup && (\n        <div className=\"popup\" style={{backgroundColor: '#f44336', color: '#fff'}}>\n          {popupMessage}\n        </div>\n      )}\n      <p>\n        {isLoginMode ? \"Don't have an account? \" : \"Already have an account? \"}\n        <button onClick={toggleMode} id=\"toggleModeButton\">\n          {isLoginMode ? 'Sign Up Here' : 'Login Here'}\n        </button>\n      </p>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}